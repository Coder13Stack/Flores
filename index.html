3D r            padding: 12px 35px; font-size: 1.2rem; cursor: pointer; border: none; border-radius: 50px;
            margin: 10px; font-family: 'Poppins', sans-serif; font-weight: 600; transition: all 0.3s ease;
        }

        #btnSi {
            background: linear-gradient(45deg, #d63384, #ff8fa3); color: white;
            box-shadow: 0 0 15px rgba(214, 51, 132, 0.5);
        }
        #btnSi:hover { transform: scale(1.1); box-shadow: 0 0 25px rgba(214, 51, 132, 0.8); }

        #btnNo { background-color: white; color: #333; position: relative; }

        .hidden { opacity: 0; pointer-events: none; transform: translateY(-20px); display: none; }
    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <div id="ui-container">
        <div id="pregunta" class="contenido-ui">
            <h1>¬øMe quieres?</h1>
            <p>Tengo una pregunta importante...</p>
            <div>
                <button id="btnSi">¬°S√≠, claro! ‚ù§Ô∏è</button>
                <button id="btnNo">No</button>
            </div>
        </div>

        <div id="mensajeFinal" class="contenido-ui hidden">
            <h2>¬°Lo sab√≠a! üíñ</h2>
            <p>El universo ha florecido para ti...</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // --- VARIABLES ---
        let scene, camera, renderer, stars, bouquetGroup;
        let flores = []; 
        let animationId;
        let bouquetRevealed = false;

        function init3D() {
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x050505, 0.002); 

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.getElementById('canvas-container').appendChild(renderer.domElement);

            // ILUMINACI√ìN MEJORADA (Para que las flores brillen)
            const ambientLight = new THREE.AmbientLight(0x222222, 2); 
            scene.add(ambientLight);
            
            // Luz frontal
            const dirLight = new THREE.DirectionalLight(0xffffff, 1);
            dirLight.position.set(5, 5, 5);
            scene.add(dirLight);
            
            // Luz rosa trasera para efecto dram√°tico
            const pointLight = new THREE.PointLight(0xff1493, 2, 50);
            pointLight.position.set(0, 0, 0);
            scene.add(pointLight);

            createGalaxyParticles();
            createHiddenBouquet();
            animate();
        }

        function createGalaxyParticles() {
            const particlesGeometry = new THREE.BufferGeometry();
            const particlesCount = 3000; 
            const posArray = new Float32Array(particlesCount * 3);

            for(let i = 0; i < particlesCount * 3; i++) {
                posArray[i] = (Math.random() - 0.5) * 80; // Esparcidas
            }

            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            const particlesMaterial = new THREE.PointsMaterial({
                size: 0.08, color: 0xffffff, transparent: true, opacity: 0.9
            });
            stars = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(stars);
        }

        function createHiddenBouquet() {
            bouquetGroup = new THREE.Group();
            scene.add(bouquetGroup);

            // Colores de rosa (Rojo intenso, rosa pastel, fucsia)
            const colors = [0xc90016, 0xff0055, 0xff69b4, 0xff1493, 0xdb7093];
            const totalFlores = 120; // Un poco menos de cantidad para mejor rendimiento, pero m√°s bonitas

            // GEOMETR√çA DE ROSA (TorusKnot con par√°metros espec√≠ficos parece p√©talos)
            // Radius, Tube, TubularSegments, RadialSegments, p, q
            const geometryRose = new THREE.TorusKnotGeometry(0.15, 0.06, 120, 16, 3, 5); 

            for (let i = 0; i < totalFlores; i++) {
                const material = new THREE.MeshStandardMaterial({
                    color: colors[Math.floor(Math.random() * colors.length)],
                    roughness: 0.3, // Un poco brillante como seda
                    metalness: 0.1,
                    emissive: 0x220000, // Un ligero brillo interno rojo
                });

                const flor = new THREE.Mesh(geometryRose, material);

                // Distribuci√≥n esf√©rica
                const phi = Math.acos(-1 + (2 * i) / totalFlores);
                const theta = Math.sqrt(totalFlores * Math.PI) * phi;
                const radio = 1.8 + Math.random() * 0.8;

                flor.position.setFromSphericalCoords(radio, phi, theta);
                
                // Rotaci√≥n inicial aleatoria
                flor.rotation.set(Math.random()*Math.PI, Math.random()*Math.PI, Math.random()*Math.PI);

                // Guardar velocidad de rotaci√≥n √∫nica para cada flor (para que giren bonito)
                flor.userData = {
                    rotSpeedX: (Math.random() - 0.5) * 0.02,
                    rotSpeedY: (Math.random() - 0.5) * 0.02
                };

                flor.scale.set(0, 0, 0); // Empiezan invisibles
                bouquetGroup.add(flor);
                flores.push(flor);
            }
        }

        function animate() {
            requestAnimationFrame(animate);

            // Movimiento fondo
            if(stars) {
                stars.rotation.y += 0.0003;
                stars.rotation.x += 0.0001;
            }

            // Movimiento del ramo entero
            if (bouquetRevealed && bouquetGroup) {
                bouquetGroup.rotation.y += 0.003;
                bouquetGroup.rotation.z += 0.001;

                // Animaci√≥n individual de cada flor (girar sobre s√≠ misma)
                flores.forEach(flor => {
                    flor.rotation.x += flor.userData.rotSpeedX;
                    flor.rotation.y += flor.userData.rotSpeedY;
                });
            }
            
            renderer.render(scene, camera);
        }

        function revelarFlorAFlor() {
            bouquetRevealed = true;
            let contador = 0;
            
            // Acercar c√°mara suavemente
            const targetZ = 3.8;
            const cameraAnim = setInterval(() => {
                if(camera.position.z > targetZ) camera.position.z -= 0.01;
                else clearInterval(cameraAnim);
            }, 20);

            const intervalo = setInterval(() => {
                if (contador >= flores.length) {
                    clearInterval(intervalo);
                    return;
                }
                const flor = flores[contador];
                
                // Efecto de "pop" al aparecer
                let escala = 0;
                const crecer = setInterval(() => {
                    escala += 0.05;
                    if (escala >= 1) {
                        flor.scale.set(1, 1, 1);
                        clearInterval(crecer);
                    } else {
                        flor.scale.set(escala, escala, escala);
                    }
                }, 16);

                contador++;
            }, 30); // Velocidad de aparici√≥n entre flores
        }

        // --- EVENTOS ---
        document.getElementById('btnSi').addEventListener('click', () => {
            const uiPregunta = document.getElementById('pregunta');
            const uiMensaje = document.getElementById('mensajeFinal');
            
            uiPregunta.style.opacity = '0';
            
            setTimeout(() => {
                uiPregunta.style.display = 'none'; // Quitar del flujo
                uiMensaje.classList.remove('hidden');
                uiMensaje.style.display = 'block'; // Asegurar display
                setTimeout(() => uiMensaje.style.opacity = '1', 50);
                
                revelarFlorAFlor();
            }, 600);
        });

        const btnNo = document.getElementById('btnNo');
        btnNo.addEventListener('mouseover', () => {
            const container = document.getElementById('ui-container').getBoundingClientRect();
            const btn = btnNo.getBoundingClientRect();
            const newX = (Math.random() - 0.5) * (container.width - btn.width * 2);
            const newY = (Math.random() - 0.5) * (container.height - btn.height * 2);
            btnNo.style.transform = `translate(${newX}px, ${newY}px)`;
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        init3D();
    </script>
</body>
</html>
</body>
</html>


